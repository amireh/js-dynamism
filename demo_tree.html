<html>
  <head>
    <script type="text/javascript" src="lib/jquery.1.7.1.min.js"></script>
    <script type="text/javascript" src="lib/dynamism.js">
    </script>

    <style>
      button {
        vertical-align: middle; 
        border-radius: 2px; 
        border: 1px solid #000;
        padding: 10px;
        font-weight: bold;
        cursor: pointer;
      }
      button:disabled { opacity: 0.5; }
      button[data-dyn-action=add] { background: #7EA800; color: white; }
      button[data-dyn-action=remove] { background: red; color: white; }
      /*button:disabled { display: none; }*/
    </style>
  </head>

  <body>
    <p>A three-tiered tree of entities.
      An entity can contain any number of sub-entities which in turn can contain any number of leaves</p>
    <h1>Entities</h2>
    <button data-dyn-action="add" data-dyn-target="my_entity">Add Entity</button>
    <section data-dyn-entity="my_entity">
      <p>
        This is entity#<span data-dyn-inject="index">#</span>.
        <button data-dyn-action="move_up">&uarr;</button>
        <button data-dyn-action="move_down">&darr;</button>
        <button data-dyn-action="remove">&times;</button>
        <button data-dyn-action="add" data-dyn-target="my_entity[-1][children]">&plus; Sub-entity</button>
      </p>

      <section data-dyn-entity="my_entity[-1][children]">
        <p style="padding-left: 20px">
          This is sub-entity #<span data-dyn-inject="index">#</span>.

          <button data-dyn-action="move_up">&uarr;</button>
          <button data-dyn-action="move_down">&darr;</button>
          <button data-dyn-action="remove">&times;</button>
          <button data-dyn-action="add" data-dyn-target="my_entity[-1][children][-1][leaves]">&plus; Leaf</button>
        </p>

        <section data-dyn-entity="my_entity[-1][children][-1][leaves]">
        <p style="padding-left: 40px">
          This is leaf #<span data-dyn-inject="index"></span>,
            the path to me is:
            <span data-dyn-target="my_entity" data-dyn-inject="index"></span> &rarr;
            <span data-dyn-target="my_entity[-1][children]" data-dyn-inject="index"></span> &rarr;
            <span data-dyn-inject="index"></span>
          .          
          <button data-dyn-target="my_entity[-1][children][-1][leaves]" data-dyn-action="remove">
            &times;
          </button>
        </p>
        </section>

      </section>
      <hr />
    </section>

  </body>
</html>
